<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gyroscope Demo</title>
</head>
<body>
    <button id="activateGyro">Activate Gyroscope</button>
    <div>
        <p>Alpha: <span id="alpha">Waiting...</span>°</p>
        <p>Beta: <span id="beta">Waiting...</span>°</p>
        <p>Gamma: <span id="gamma">Waiting...</span>°</p>
    </div>

    <script>
        document.getElementById('activateGyro').addEventListener('click', function() {
            // Check for DeviceOrientationEvent support
            if ('DeviceOrientationEvent' in window) {
                // Request permission for iOS 13+ devices
                if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                    DeviceOrientationEvent.requestPermission()
                        .then(permissionState => {
                            if (permissionState === 'granted') {
                                window.addEventListener('deviceorientation', handleOrientation, true);
                            } else {
                                alert('Permission not granted for gyroscope.');
                            }
                        })
                        .catch(console.error);
                } else {
                    // Automatically grant access if not iOS or no permission needed
                    window.addEventListener('deviceorientation', handleOrientation, true);
                }
            } else {
                alert("Sorry, your device does not support gyroscope.");
            }
        });

        function handleOrientation(event) {
            document.getElementById('alpha').textContent = (event.alpha ? event.alpha.toFixed(2) : 'No data');
            document.getElementById('beta').textContent = (event.beta ? event.beta.toFixed(2) : 'No data');
            document.getElementById('gamma').textContent = (event.gamma ? event.gamma.toFixed(2) : 'No data');
        }

        // Optional: add a listener to stop listening on a certain condition or after some time
        function stopGyroscopeListener() {
            window.removeEventListener('deviceorientation', handleOrientation, true);
        }
    </script>
</body>
</html>
