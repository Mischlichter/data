document.addEventListener("DOMContentLoaded",async function(){let b="firstLoadComplete",E="secondLoadComplete",I=0,o=(localStorage.getItem(b)&&!localStorage.getItem(E)&&(I=111),["                 /^ ^\\                ","                / 111 \\               ","                V\\ Y /V               ","                 / - \\                ","                /    |                ","               V__) ||                ","**************************************","**** LOADING HOGEAI WEBSITE FILES ****","**************************************"]);var e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="50000vh",e.style.zIndex="-2",e.style.backgroundColor="rgba(0, 0, 0, 0)",document.body.insertBefore(e,document.body.firstChild);let r=document.getElementById("ascii-art-container-XL"),n=o[0].length;o.forEach((e,t)=>{let n=document.createElement("div");n.className="ascii-line-XL",e.split("").forEach((e,t)=>{var o=document.createElement("span");o.setAttribute("data-original-char",e)," "!==e&&""!==e||o.classList.add("hidden-char-XL"),n.appendChild(o)}),r.appendChild(n),localStorage.getItem("firstLoadComplete")&&document.querySelectorAll(".ascii-line-XL").forEach(function(e){e.style.visibility="hidden"})});function i(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%&*()[]{}|";return e.charAt(Math.floor(Math.random()*e.length))}function a(){return`hsl(${Math.floor(360*Math.random())}, 100%, 50%)`}let t=0,s=setInterval(function(){document.querySelectorAll(".ascii-line-XL").forEach(t=>{for(let e=0;e<n;e++){var o=t.childNodes[e];o&&(100===I?(o.textContent=o.getAttribute("data-original-char"),o.style.color="",o.classList.remove("hidden-char-XL")):e>=I&&e<I+7?(o.textContent=i(),o.style.color=a()):e>=I-7&&e<I&&(o.textContent=o.getAttribute("data-original-char"),o.style.color=""))}})},30);setInterval(function(){t<I&&(t=I),I++},1e5);let l=setInterval(function(){if(45<=I){{let r=Array.from(document.querySelectorAll("span")).filter(e=>"1"===e.getAttribute("data-original-char"));r.forEach((n,e)=>{setTimeout(()=>{{var o=n;r.length;let e=0,t=setInterval(()=>{11100<=e?(clearInterval(t),o.textContent="1",o.style.color=""):(o.textContent=i(),o.style.color=a(),e+=1e3/420)},1e3/420)}},50*e)})}clearInterval(l),clearInterval(s)}},10);async function c(){var e="indexedDB"in window?(console.log("This browser supports IndexedDB"),!0):(console.log("This browser does not support IndexedDB"),!1);console.log("Loading");let o;if(e)for(let t=1;t<=5;t++)try{o=await function(e,r){return new Promise((t,o)=>{let n=setTimeout(()=>{o(new Error("Timeout"))},r);e.then(e=>{clearTimeout(n),t(e)}).catch(e=>{clearTimeout(n),o(e)})})}(idb.openDB("MyDatabase",1,{upgrade(e,t,o,n){e.objectStoreNames.contains("assets")||e.createObjectStore("assets",{keyPath:"url"})}}),3e3);break}catch(e){if(console.error(`Error opening database on attempt ${t}:`,e),!(t<5)){o=null;break}await new Promise(e=>setTimeout(e,1e3))}let n;try{n=await caches.open("site-assets")}catch(e){return void console.error("Error opening cache:",e)}let t,r;try{[t,r]=await Promise.all([fetch("https://raw.githubusercontent.com/Mischlichter/data/main/index.json").then(e=>e.json()),fetch("https://raw.githubusercontent.com/Mischlichter/data/main/assets/pagesi.txt").then(e=>e.text())])}catch(e){return void console.error("Error fetching assets or extra assets:",e)}let i=[];!function t(o,n){for(var r in o)if(o.hasOwnProperty(r)&&(r.startsWith("Viewer")||r.startsWith("interface"))){let e=o[r];if("object"!=typeof e){let t=S(e);if(t){let e={url:"https://raw.githubusercontent.com/Mischlichter/data/main/"+r,lastModified:t.toISOString()};n.push(e)}else console.error("Failed to standardize date for key:",r,"value:",e)}else t(e,n)}}(t,i);var a=function(e,o){var n=[],e=e.split("\n");for(var r of e){r=r.trim();if(r.startsWith("https://")){let t=new URL(r).pathname.split("/").pop();var i,a=Object.keys(o).find(e=>e.endsWith(t));a?(a=o[a],(i=S(a))?(r={url:r,lastModified:i.toISOString()},n.push(r)):console.error("Invalid date for filename:",t,"value:",a)):console.log("No manifest entry found for filename: "+t)}}return n}(r,t);i.push(...a);let s=0;var l,c,d,u,m,h,f=[];for({url:l,lastModified:c}of i){let t=!0;if(e&&o)try{var g=await o.transaction("assets").objectStore("assets").get(l);g&&new Date(g.lastModified)>=new Date(c)&&(t=!1)}catch(e){console.error("Error checking IndexedDB for url:",l,e),t=!0}if(t)try{(h=await fetch(l)).ok?(d=h.clone(),await n.put(l,d),e&&o&&(u=await h.blob(),m=h.headers.get("last-modified")||new Date(c).toISOString(),f.push({url:l,blob:u,lastModified:m}))):console.error("HTTP error! Status: "+h.status)}catch(e){console.error("Error fetching url:",l,e)}s++,requestAnimationFrame(()=>{if(s<i.length)I=Math.floor(s/i.length*90);else{I=90;let o=performance.now(),n=1e3;requestAnimationFrame(function e(t){t-=o,t=Math.min(t/n,1);I=90+10*t,t<1?requestAnimationFrame(e):I=100})}}),await new Promise(e=>setTimeout(e,11))}if(e&&o)try{var y=f;try{var v,w=(await idb.openDB("MyDatabase",1,{upgrade(e,t,o,n){e.objectStoreNames.contains("assets")||e.createObjectStore("assets",{keyPath:"url"})}})).transaction("assets","readwrite"),p=w.objectStore("assets");for(v of y)await p.put({url:v.url,blob:v.blob,lastModified:v.lastModified});await w.done,console.log("All assets are stored in IndexedDB")}catch(e){console.error("Error storing assets in IndexedDB:",e)}await 0}catch(e){console.error("Error storing assets in IndexedDB:",e)}localStorage.getItem(b)||localStorage.setItem(b,"true"),localStorage.getItem(E)||localStorage.setItem(E,"true"),document.querySelectorAll(".ascii-line-XL").forEach(function(e){e.style.transition="opacity 1s ease-out",e.style.opacity="0"}),setTimeout(()=>{window.location.reload()},1111)}function S(e){var t=e.replace(" ","T")+"Z";let o=new Date(t);return!isNaN(o.getTime())||(t=e.match(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/))&&(o=new Date(`${t[1]}-${t[2]}-${t[3]}T${t[4]}:${t[5]}:${t[6]}Z`),!isNaN(o.getTime()))?o:(console.error("Unable to parse date:",e),null)}function d(){initialize();let e=document.querySelector(".center-container-XL");e?(e.style.opacity="0",setTimeout(()=>{e.style.display="none"},500)):console.error("Center container not found."),initializeMenu();var t=[...o];t[7]="***** WELCOME TO HOGEAI WEBSPACE *****",console.log(t.join("\n"))}let u=!1,m=0,h=32,f=0,g=0,y=0,v=0,w=!1,p=36,L=0,D=0,M=window.orientation||0,O=.7;function T(e){var t,o,n;u&&(t=Date.now())-m>h&&(m=t,t=window.innerWidth>window.innerHeight,o=window.orientation||0,w||(y=e.gamma,v=e.beta,w=!0),n=e.gamma-y,e=e.beta-v,t?90===o?(L=e*p,D=-n*p):-90!==o&&270!==o||(L=-e*p,D=n*p):(L=n*p,D=e*p),f+=(L-f)*O,g+=(D-g)*O,sendMouseEventToIframe("mousemove",{clientX:f,clientY:g}))}function A(){var e=document.getElementById("permissionOverlay");e?(e.style.opacity="0",setTimeout(()=>{e.style.visibility="hidden"},500)):console.log("Overlay not found.")}function B(){var e=document.getElementById("permissionOverlay"),o=document.getElementById("enableButton");e&&(e.style.visibility="visible",e.style.opacity="0",setTimeout(()=>e.style.opacity="1",10)),o&&(o.style.visibility="visible",o.style.opacity="0",setTimeout(()=>{var t;o.style.opacity="1",(t=document.getElementById("enableButton"))?(t.addEventListener("touchstart",function(e){e.preventDefault(),t.style.backgroundColor="lightblue"}),t.addEventListener("touchend",function(e){e.preventDefault(),t.style.backgroundColor="",A(),d(),"DeviceOrientationEvent"in window?"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(e=>{"granted"===e?window.addEventListener("deviceorientation",T,!0):console.error("Permission denied by user.")}).catch(e=>{console.error("Error requesting permission: "+e)}):window.addEventListener("deviceorientation",T,!0):console.error("Your device does not support gyroscope.")})):console.log("Enable button not found.")},10))}window.triggerOrientationWithoutCalibration=function(){w=!1},window.addEventListener("orientationchange",function(){var e=window.orientation||0;e!==M&&(w=!1,console.log("Orientation change detected. Recalibration required."),M=e)}),window.enableGyro=function(){u||(u=!0,window.addEventListener("deviceorientation",T,!0),console.log("Gyroscope Enabled"),requestAnimationFrame(()=>T({gamma:y,beta:v})))},window.disableGyro=function(){u&&(u=!1,window.removeEventListener("deviceorientation",T,!0),console.log("Gyroscope Disabled"))},localStorage.getItem(b)&&localStorage.getItem(E)?((/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?B:(d(),A))(),localStorage.removeItem(b),localStorage.removeItem(E)):c()});