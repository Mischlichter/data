const galleryHTML=`
    
        
        <div class="center-container">
            <div id="ascii-art-container">
                <!-- Your ASCII art content goes here -->
            </div>
        </div>


        <div id="loading-progress-container">
            <svg viewBox="0 0 36 36" class="circular-chart">
                <path class="circle-bg"
                    d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                    fill="none"
                    stroke="#eeeeee"
                    stroke-width="2.5"
                />

                <path class="circle"
                    stroke-dasharray="100, 100"
                    d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                    fill="none"
                    stroke="#00ffcc"
                    stroke-width="2.5"
                    id="loading-progress"
                />
            </svg>
        </div>

        

        <div class="centered-container">
            <div id="notification-popup" style="display: none;">Message goes here</div>
            <div id="notification-popup2" style="display: none;">Message goes here</div>
            <div class="hover-effect-wrapper" id="hover-effect-wrapper">
                <div class="hover-effect-container" id="hover-effect"></div>
            </div>
            <div class="slides" id="slideshow">
                <div class="button-container">
                    <div class="toggle-button" onclick="toggleTextInfo()">Toggle Prompt</div>
                </div>

                <div class="btn-nav" id="btn-prev">‹</div>
                <div class="btn-nav" id="btn-next">›</div>
                <div class="close" onclick="toggleSlideshow()">×</div>
               
                <div id="text-info2" class="adjust-width">
                    <p id="text-prompt2"></p>
                    <p id="text-seed2"></p>
                    <p id="text-creator2"></p>
                </div>
                <div id="text-info" class="adjust-width">
                    <p id="text-prompt"></p>
                    <p id="text-seed"></p>
                    <p id="text-creator"></p>
                </div>
            </div>

        </div>

        <div id="search-container">
            <input type="text" id="search-bar" placeholder="Loading please wait..." disabled>
        </div>


        <div id="gallery-container"></div>


`;let globalLinkUrl="",loadingPercentage=0,loadingprePercentage=0;var hoverEffectInstance,dynamicImages=[],currentImageIndex=0;const TOTAL_IMAGES_FOR_PRE_PERCENTAGE=144;let loadCallCount=0;function loadGallery(){loadingPercentage=0;const bodyGalleryContainer=document.getElementById("bodyGalleryContainer");bodyGalleryContainer&&(bodyGalleryContainer.innerHTML=galleryHTML,initializePage(),calculateAspectRatio()),document.getElementById("search-bar").addEventListener("input",toggleOverlayContainers),document.getElementById("btn-next").addEventListener("click",showNextSlide),document.getElementById("btn-prev").addEventListener("click",showPrevSlide),document.querySelector(".close").addEventListener("click",toggleSlideshow),toggleOverlayContainers(),document.getElementById("search-bar").addEventListener("input",function(){const query=this.value.trim().toLowerCase();0<query.length?(this.style.animation="none",filterImagesAndOverlays(query)):(this.style.animation="",showAllImages())})}const galleryContainer=document.getElementById("gallery-container");function sendHeightToParent(){const height=document.body.scrollHeight;window.parent.postMessage({messageType:"setHeight",height:height},"*")}function calculateAspectRatio(){const screenWidth=window.innerWidth,screenHeight=window.innerHeight,aspectRatio=screenWidth/screenHeight;aspectRatio<=1?(document.body.classList.add("square-aspect-ratio"),adjustNavButtonsForAspectRatio(!0)):(document.body.classList.remove("square-aspect-ratio"),adjustNavButtonsForAspectRatio(!1))}let lastHeight=window.innerHeight,lastOrientation=window.innerWidth>window.innerHeight?"landscape":"portrait";const heightChangeThresholdG=96;function adjustNavButtonsForAspectRatio(isSquare){const btnPrev=document.getElementById("btn-prev"),btnNext=document.getElementById("btn-next"),buttonOverlay=document.getElementById("button-overlay"),originalParentElement=document.getElementById("slideshow");btnPrev&&btnNext&&(isSquare?(buttonOverlay&&(buttonOverlay.appendChild(btnPrev),buttonOverlay.appendChild(btnNext),btnPrev.style.position="absolute",btnNext.style.position="absolute",btnPrev.style.top="50%",btnNext.style.top="50%",btnPrev.style.transform="translateY(-50%)",btnNext.style.transform="translateY(-50%)"),btnPrev.style.zIndex="1111010",btnNext.style.zIndex="1111010"):(originalParentElement.appendChild(btnPrev),originalParentElement.appendChild(btnNext),btnPrev.style.position="",btnNext.style.position="",btnPrev.style.top="",btnNext.style.top="",btnPrev.style.transform="",btnNext.style.transform="",btnPrev.style.zIndex="",btnNext.style.zIndex=""))}function createBackgroundSurface(){var centeredContainer=document.querySelector(".centered-container"),backgroundSurface=document.createElement("div");backgroundSurface.id="background-surface",backgroundSurface.style.position="absolute",backgroundSurface.style.top="-25%",backgroundSurface.style.left="-25%",backgroundSurface.style.width="150%",backgroundSurface.style.height="150%",backgroundSurface.style.backgroundColor="black",backgroundSurface.style.zIndex="-1",centeredContainer.appendChild(backgroundSurface)}window.addEventListener("resize",function(){const currentHeight=window.innerHeight,currentOrientation=window.innerWidth>window.innerHeight?"landscape":"portrait";if(isIOS){const heightDifference=Math.abs(currentHeight-lastHeight);heightDifference>heightChangeThresholdG&&(currentOrientation!==lastOrientation&&(window.scrollTo({left:0}),lastOrientation=currentOrientation),calculateAspectRatio(),lastHeight=currentHeight)}else calculateAspectRatio()});let textInfoVisible=!0;function toggleTextInfo(){document.getElementById("text-info");const textInfo2=document.getElementById("text-info2");textInfoVisible?(hideTextInfo().then(()=>{textInfo2.style.pointerEvents="none"}),textInfoVisible=!1):(textInfoVisible=!0,showTextInfo().then(()=>{textInfo2.style.pointerEvents="auto"}))}function toggleOverlayContainers(){const searchInput=document.getElementById("search-bar"),imageContainers=document.querySelectorAll(".image-container");""===searchInput.value.trim()?imageContainers.forEach(container=>{const overlay=container.querySelector(".word-overlay");overlay.style.display="none"}):imageContainers.forEach(container=>{const overlay=container.querySelector(".word-overlay");overlay.style.display="block"})}function initializeLoadingScreen(){blockInteractions(),disableScroll();const asciiArt=["                 /^ ^\\                ","                / 111 \\               ","                V\\ Y /V               ","                 / - \\                ","                /    |                ","               V__) ||                ","**************************************","*** LOADING DATA *** IMAGE LIBRARY ***","**************************************"],background=document.createElement("div"),container=(background.style.position="absolute",background.style.top="0",background.style.left="0",background.style.width="100%",background.style.height="500vh",background.style.zIndex="-1",background.style.backgroundColor="rgba(0, 0, 0, 1)",document.body.insertBefore(background,document.body.firstChild),setTimeout(function(){fetchImageFilenames()},10),document.getElementById("ascii-art-container")),numberOfCharacters=asciiArt[0].length;function preventDefault(e){e.preventDefault()}function disableScroll(){isScrollDisabled||(window.addEventListener("wheel",preventDefault,{passive:!1}),window.addEventListener("touchmove",preventDefault,{passive:!1}),isScrollDisabled=!0)}function enableScroll(){isScrollDisabled&&(window.removeEventListener("wheel",preventDefault),window.removeEventListener("touchmove",preventDefault),isScrollDisabled=!1)}function generateRandomCharacter(){const characters="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%&*()[]{}|";return characters.charAt(Math.floor(Math.random()*characters.length))}function generateRandomColor(){const hue=Math.floor(360*Math.random()),saturation=100,lightness=50;return`hsl(${hue}, ${saturation}%, ${lightness}%)`}asciiArt.forEach((line,lineIndex)=>{const lineDiv=document.createElement("div");lineDiv.className="ascii-line",line.split("").forEach((char,charIndex)=>{const span=document.createElement("span");span.setAttribute("data-original-char",char)," "!==char&&""!==char||span.classList.add("hidden-char"),lineDiv.appendChild(span)}),container.appendChild(lineDiv)});let lastIntervalValue=0;const shuffleWidth=7,shuffleInterval=setInterval(function(){document.querySelectorAll(".ascii-line").forEach(line=>{for(let charIndex=0;charIndex<numberOfCharacters;charIndex++){const span=line.childNodes[charIndex];span&&(charIndex>=loadingprePercentage&&charIndex<loadingprePercentage+shuffleWidth?(span.textContent=generateRandomCharacter(),span.style.color=generateRandomColor()):charIndex>=loadingprePercentage-shuffleWidth&&charIndex<loadingprePercentage&&(span.textContent=span.getAttribute("data-original-char"),span.style.color=""))}})},30),loadingInterval=(setInterval(function(){lastIntervalValue<loadingprePercentage&&(lastIntervalValue=loadingprePercentage),loadingPercentage++},1e5),setInterval(function(){40<=loadingprePercentage&&(shuffleOnes(),clearInterval(loadingInterval),clearInterval(shuffleInterval))},10));function shuffleOnes(){const spansWithOne=Array.from(document.querySelectorAll("span")).filter(span=>"1"===span.getAttribute("data-original-char")),shuffleDuration=150,delayBetweenSpans=50;function shuffleSpan(span,isLastSpan){let timeElapsed=0;const shuffleFrequency=420,shuffle=setInterval(()=>{timeElapsed>=shuffleDuration?(clearInterval(shuffle),span.textContent="1",span.style.color="",isLastSpan&&removeCenterContainer()):(span.textContent=generateRandomCharacter(),span.style.color=generateRandomColor(),timeElapsed+=1e3/shuffleFrequency)},1e3/shuffleFrequency)}spansWithOne.forEach((span,index)=>{setTimeout(()=>{shuffleSpan(span,index===spansWithOne.length-1)},delayBetweenSpans*index)})}function removeCenterContainer(){const centerContainer=document.querySelector(".center-container");centerContainer&&(centerContainer.style.transition="opacity 1s ease-out",centerContainer.style.opacity="0",scrollToTop(),setTimeout(()=>{centerContainer.remove(),enableScroll(),unblockInteractions()},1e3))}}let abortController=new AbortController;function fetchImageFilenames(){abortController=new AbortController;const signal=abortController.signal;let imageMetadata={};const galleryContainer=document.getElementById("gallery-container");let db;if(window.indexedDB){let request=window.indexedDB.open("MyDatabase",1);function fetchMetadataAndImages(){fetch("https://raw.githubusercontent.com/Mischlichter/data/main/index.json",{signal:signal}).then(response=>response.json()).then(indexData=>{fetch("https://raw.githubusercontent.com/Mischlichter/data/main/lib/metadata.json",{signal:signal}).then(response=>response.json()).then(data=>{imageMetadata=data,fetch("https://api.github.com/repos/Mischlichter/data/contents/gallerycom",{signal:signal}).then(response=>response.json()).then(files=>{const totalImages=files.length;let loadedImages=0;function loadImage(index){if(!(index>=totalImages)){const file=files[index],imageContainer=document.createElement("div"),img=(imageContainer.classList.add("image-container"),document.createElement("img")),metadata=(img.classList.add("grid-image"),img.alt="Scene Image",imageMetadata[file.name]||{}),wordOverlay=document.createElement("div");wordOverlay.classList.add("word-overlay"),imageContainer.appendChild(img),imageContainer.appendChild(wordOverlay),img.dataset.metadata=JSON.stringify(metadata);let transaction=db.transaction("assets","readonly"),store=transaction.objectStore("assets"),dbRequest=store.get(file.download_url);dbRequest.onsuccess=function(event){let dbResult=event.target.result,lastModifiedInDB=dbResult?new Date(dbResult.lastModified):new Date(0),dateStr=indexData[file.name]?.lastModified,lastModifiedCurrent;if(dateStr){let parts=dateStr.split(/[- :]/);lastModifiedCurrent=new Date(parts[0],parts[1]-1,parts[2],parts[3],parts[4],parts[5])}else lastModifiedCurrent=new Date(0);if(!dbResult||lastModifiedInDB<lastModifiedCurrent)fetch(file.download_url,{signal:signal}).then(response=>response.blob()).then(blob=>{db.transaction("assets","readwrite").objectStore("assets").put({url:file.download_url,blob:blob,lastModified:lastModifiedCurrent.toISOString()});const dataUrl=URL.createObjectURL(blob);img.src=dataUrl,dynamicImages.push(img.src)}).catch(error=>{error.name});else{const blob=dbResult.blob;blob instanceof Blob?(img.src=URL.createObjectURL(blob),dynamicImages.push(img.src)):loadImage(index+1)}img.onload=()=>{loadedImages++,updateLoadingStatus(loadedImages/totalImages*100),img.onclick=()=>onImageClick(img.src),-1!==currentImageIndex&&showSlideshow(),loadedImages,totalImages,galleryContainer.appendChild(imageContainer),setTimeout(()=>loadImage(index+1),7)},img.onerror=()=>{loadImage(index+1)}},dbRequest.onerror=function(){}}}loadingPercentage=0,loadingprePercentage=0,loadCallCount=0,loadedImages=0,loadImage(0)}).catch(error=>{error.name})}).catch(error=>{error.name})}).catch(error=>{error.name})}request.onerror=function(event){},request.onsuccess=function(event){db=event.target.result,fetchMetadataAndImages()},request.onupgradeneeded=function(event){let db=event.target.result;db.objectStoreNames.contains("assets")||db.createObjectStore("assets",{keyPath:"url"})}}}function updateVisibleImages(){const allImages=document.querySelectorAll("img"),newVisibleImages=[],newImagesHidden=(allImages.forEach(img=>{const container=img.closest(".image-container"),isVisible=container&&!container.classList.contains("hidden-image");isVisible&&newVisibleImages.push(img.src)}),dynamicImages.filter(src=>!newVisibleImages.includes(src))),newImagesShown=newVisibleImages.filter(src=>!dynamicImages.includes(src));newImagesHidden.length,newImagesShown.length,dynamicImages=newVisibleImages}function onImageClick(imgSrc){if(updateVisibleImages(),currentImageIndex=dynamicImages.indexOf(imgSrc),-1!==currentImageIndex){const centeredContainer=document.querySelector(".centered-container");centeredContainer.style.display="flex",centeredContainer.style.position="fixed",centeredContainer.style.top="0",centeredContainer.style.left="0",centeredContainer.style.width="100%",centeredContainer.style.height="100%",centeredContainer.style.zIndex="9999",centeredContainer.style.backgroundColor="rgba(0, 0, 0, 0)",centeredContainer.style.opacity="0",centeredContainer.style.transition="opacity 0.5s ease-in-out",setTimeout(()=>{centeredContainer.style.backgroundColor="rgba(0, 0, 0, 1)",centeredContainer.style.opacity="1",disableScroll(),recreateHoverEffectini(),setTimeout(()=>{updateTextInfo()},5)},50)}}function updateLoadingStatus(percentage){loadingPercentage=Math.min(Math.max(percentage,0),100),sendHeightToParent(),loadCallCount++,loadingprePercentage=Math.min(loadCallCount/TOTAL_IMAGES_FOR_PRE_PERCENTAGE*100,100);percentage=document.getElementById("loading-progress");if(percentage){const pathLength=percentage.getTotalLength(),offset=pathLength-pathLength*loadingPercentage/100;if(percentage.style.strokeDasharray=pathLength,percentage.style.strokeDashoffset=offset,100<=loadingPercentage){const searchBar=document.getElementById("search-bar");searchBar.style.opacity=0,setTimeout(()=>{searchBar.placeholder="Search...",searchBar.disabled=!1,searchBar.style.opacity=1,stopGif()},150),hideLoadingProgress(),loadingprePercentage=0,loadingPercentage=0}}}function resetLoadingStatus(){loadingPercentage=0,loadingprePercentage=0,loadCallCount=0,loadedImages=0}function hideLoadingProgress(){const loadingContainer=document.getElementById("loading-progress-container");loadingContainer&&(loadingContainer.style.opacity="0",setTimeout(()=>{loadingContainer.style.display="none"},1e3))}function calculateImagesPerRow(){const minGridItemWidth=180;return Math.floor(window.innerWidth/minGridItemWidth)}function calculateRowsPerViewport(){const minGridItemWidth=180;return Math.ceil(window.innerHeight/minGridItemWidth)}function updateTextInfo(){const imgSrc=dynamicImages[currentImageIndex],imageElement=document.querySelector(`img[src="${imgSrc}"]`);if(imageElement)try{const metadata=JSON.parse(imageElement.getAttribute("data-metadata")||"{}"),promptElement=document.getElementById("text-prompt"),seedElement=document.getElementById("text-seed"),creatorElement=document.getElementById("text-creator");promptElement.textContent="Prompt: "+(metadata.Prompt||"N/A"),seedElement.textContent="Seed: "+(metadata.Seed||"N/A"),creatorElement.textContent="Creator: "+(metadata.Creator||"N/A"),promptElement.style.visibility="hidden",seedElement.style.visibility="hidden",creatorElement.style.visibility="hidden",updateTextInfo2(),startTextInfoAnimation(),createLinkFromTextInfo()}catch(error){}}function createLinkFromTextInfo(){const seedElement=document.getElementById("text-seed2"),seed=seedElement.textContent.replace("Seed: ","").trim();globalLinkUrl=`https://www.hogeai.com/sharing/${seed}.html`,createClickableLink(globalLinkUrl)}function createClickableLink(url){const linkElement=document.createElement("a");linkElement.href=url,linkElement.textContent="Access Shared Content",document.body.appendChild(linkElement)}function disposeLinks(){const links=document.querySelectorAll("a");links.forEach(link=>{"Access Shared Content"===link.textContent&&link.remove()})}function updateTextInfo2(){const imgSrc=dynamicImages[currentImageIndex],imageElement=document.querySelector(`img[src="${imgSrc}"]`);if(showTextInfo(),imageElement)try{const metadata=JSON.parse(imageElement.getAttribute("data-metadata")||"{}");document.getElementById("text-prompt2").textContent="Prompt: "+(metadata.Prompt||"N/A"),document.getElementById("text-seed2").textContent="Seed: "+(metadata.Seed||"N/A"),document.getElementById("text-creator2").textContent="Creator: "+(metadata.Creator||"N/A")}catch(error){}}function generateRandomString2(length){for(var characters="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%&*()[]{}|",randomString="",i=0;i<length;i++)randomString+=characters.charAt(Math.floor(Math.random()*characters.length));return randomString}function createSpansForTextInfo(textInfoId,text){const container=document.getElementById(textInfoId);container.innerHTML="",text.split("\n").forEach(line=>{const lineSpan=document.createElement("span"),lineContainer=(lineSpan.className="line-span",document.createElement("div")),words=(lineContainer.className="line-container",lineSpan.appendChild(lineContainer),line.split(" "));words.forEach((word,index)=>{const wordSpan=document.createElement("span");wordSpan.className="dynamic-text",wordSpan.setAttribute("data-final-text",word),wordSpan.textContent=generateRandomString2(word.length),lineContainer.appendChild(wordSpan),index<words.length-1&&lineContainer.appendChild(document.createTextNode(" "))}),container.appendChild(lineSpan)}),setTimeout(()=>fixLayout(container),0)}function fixLayout(container){Array.from(container.getElementsByClassName("dynamic-text")).forEach(span=>{const originalText=span.getAttribute("data-final-text"),measureSpan=document.createElement("span"),exactWidth=(measureSpan.textContent=originalText,measureSpan.className="measure-span",measureSpan.style.visibility="hidden",span.parentNode.appendChild(measureSpan),measureSpan.offsetWidth+"px");span.style.width=exactWidth,span.style.minWidth=exactWidth,span.style.maxWidth=exactWidth,span.style.display="inline-block",span.style.whiteSpace="nowrap",span.parentNode.removeChild(measureSpan)})}function animateTextInfoSpans(textInfoId,duration=500,baseDelay=10){const container=document.getElementById(textInfoId),lineSpans=container.getElementsByClassName("line-span");let totalWordIndex=0;Array.from(lineSpans).forEach((lineSpan,lineIndex)=>{const spans=lineSpan.getElementsByClassName("dynamic-text");Array.from(spans).forEach((span,wordIndex)=>{let delay=baseDelay*totalWordIndex++;setTimeout(()=>{const finalText=span.getAttribute("data-final-text");animateText3(span,finalText,duration)},delay)})})}function animateText3(span,finalText,duration){let startTime=null;span.style.visibility="visible";const speedFactor=1,baseInterval=50,minInterval=baseInterval/speedFactor;let lastUpdate=0;function animate(currentTime){startTime||(startTime=currentTime,lastUpdate=currentTime);const elapsedTime=currentTime-startTime;if(elapsedTime>=duration)return span.innerText=finalText,!1;if(currentTime-lastUpdate>=minInterval){lastUpdate=currentTime;const progress=elapsedTime/duration,mixIndex=Math.floor(progress*finalText.length);let randomizedPart=generateRandomString2(finalText.length-mixIndex);span.innerText=finalText.substring(0,mixIndex)+randomizedPart}return!0}AnimationManager.registerAnimation(animate)}function startTextInfoAnimation(){const textPrompt=document.getElementById("text-prompt").textContent,textSeed=document.getElementById("text-seed").textContent,textCreator=document.getElementById("text-creator").textContent;createSpansForTextInfo("text-prompt",textPrompt),createSpansForTextInfo("text-seed",textSeed),createSpansForTextInfo("text-creator",textCreator);let totalWords=countTotalWords22(["text-prompt","text-seed","text-creator"]);animateTextInfoSpans("text-prompt",700,10,0,totalWords),animateTextInfoSpans("text-seed",700,10,countWords22("text-prompt"),totalWords),animateTextInfoSpans("text-creator",700,10,countWords22("text-prompt")+countWords22("text-seed"),totalWords)}function countWords22(textInfoId){const container=document.getElementById(textInfoId);return container.getElementsByClassName("dynamic-text").length}function countTotalWords22(ids){return ids.reduce((total,id)=>total+countWords22(id),0)}function animateTextInfoSpans(textInfoId,duration,baseDelay,startIndex,totalWords){const container=document.getElementById(textInfoId),spans=container.getElementsByClassName("dynamic-text");Array.from(spans).forEach((span,index)=>{let globalIndex=startIndex+index,delay=baseDelay*globalIndex/totalWords;setTimeout(()=>{const finalText=span.getAttribute("data-final-text");animateText3(span,finalText,duration)},delay)})}function hideTextInfo(){return new Promise((resolve,reject)=>{const textInfo=document.getElementById("text-info");if(!textInfoVisible||!textInfo)return resolve();isMobileDevice()?(textInfo.style.opacity="0",textInfo.style.transition="none",resolve()):setTimeout(()=>{textInfo.style.opacity="0",setTimeout(()=>{resolve()},200)},30)})}function showTextInfo(){return new Promise((resolve,reject)=>{const textInfo=document.getElementById("text-info");if(!textInfoVisible||!textInfo)return resolve();textInfo.style.display="block",isMobileDevice()?(textInfo.style.opacity="1",textInfo.style.transition="none",resolve()):setTimeout(()=>{textInfo.style.opacity="1",resolve()},100)})}function createButtonOverlay(){var buttonOverlay,existingOverlay=document.getElementById("button-overlay");return existingOverlay?(existingOverlay.style.display="",existingOverlay):(existingOverlay=document.body,buttonOverlay=document.createElement("div"),buttonOverlay.id="button-overlay",existingOverlay.appendChild(buttonOverlay),buttonOverlay)}function createNewHoverEffectContainer(){var wrapper=document.getElementById("hover-effect-wrapper"),newContainer=document.createElement("div");return newContainer.className="hover-effect-container",wrapper.appendChild(newContainer),newContainer}function removeOldHoverEffectContainer(){var oldContainer,wrapper=document.getElementById("hover-effect-wrapper"),wrapper=wrapper.getElementsByClassName("hover-effect-container");1<wrapper.length&&(oldContainer=wrapper[0],oldContainer.classList.add("fade-out"),oldContainer.hoverEffectInstance&&disposeHoverEffectInstance(oldContainer.hoverEffectInstance),setTimeout(function(){oldContainer.parentNode&&oldContainer.parentNode.removeChild(oldContainer)},2e3))}function recreateHoverEffectini(){removeOldHoverEffectContainer(),createButtonOverlay(),calculateAspectRatio();var newContainer=createNewHoverEffectContainer();isMobileDevice()?(newContainer.style.backgroundImage="url("+dynamicImages[currentImageIndex]+")",newContainer.style.backgroundSize="cover",newContainer.style.backgroundPosition="center",newContainer.style.backgroundRepeat="no-repeat"):hoverEffectInstance=new hoverEffect({parent:newContainer,intensity:.3,image1:dynamicImages[currentImageIndex],image2:dynamicImages[currentImageIndex],displacementImage:dynamicImages[currentImageIndex]})}function isMobileDevice(){var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return isMobile}function recreateHoverEffectnext(){removeOldHoverEffectContainer();var newContainer=createNewHoverEffectContainer(),nextImageIndex=(currentImageIndex+1)%dynamicImages.length;isMobileDevice()?(newContainer.style.opacity="0",newContainer.style.transition="opacity 0.5s ease",newContainer.style.backgroundImage="url("+dynamicImages[nextImageIndex]+")",newContainer.style.backgroundSize="cover",newContainer.style.backgroundPosition="center",newContainer.style.backgroundRepeat="no-repeat",setTimeout(function(){newContainer.style.opacity="1"},11)):hoverEffectInstance=new hoverEffect({parent:newContainer,intensity:.3,image1:dynamicImages[currentImageIndex],image2:dynamicImages[nextImageIndex],displacementImage:dynamicImages[nextImageIndex],angle2:Math.PI/4})}function recreateHoverEffectprev(){removeOldHoverEffectContainer();var newContainer=createNewHoverEffectContainer(),prevImageIndex=(currentImageIndex-1+dynamicImages.length)%dynamicImages.length;isMobileDevice()?(newContainer.style.opacity="0",newContainer.style.transition="opacity 0.5s ease",newContainer.style.backgroundImage="url("+dynamicImages[prevImageIndex]+")",newContainer.style.backgroundSize="cover",newContainer.style.backgroundPosition="center",newContainer.style.backgroundRepeat="no-repeat",setTimeout(function(){newContainer.style.opacity="1"},11)):hoverEffectInstance=new hoverEffect({parent:newContainer,intensity:.3,image1:dynamicImages[currentImageIndex],image2:dynamicImages[prevImageIndex],displacementImage:dynamicImages[prevImageIndex]})}function showNextSlide(){hideTextInfo(),recreateHoverEffectnext(),setTimeout(function(){currentImageIndex=(currentImageIndex+1)%dynamicImages.length,isMobileDevice()?updateTextInfo():(hoverEffectInstance.next(),setTimeout(updateTextInfo,850))},30)}function showPrevSlide(){hideTextInfo(),recreateHoverEffectprev(),setTimeout(function(){currentImageIndex=(currentImageIndex-1+dynamicImages.length)%dynamicImages.length,isMobileDevice()?updateTextInfo():(hoverEffectInstance.next(),setTimeout(updateTextInfo,850))},30)}function disposeHoverEffectInstance(instance){if(instance&&instance.scene&&instance.renderer){instance.uniforms&&(disposeTexture(instance.uniforms.texture1),disposeTexture(instance.uniforms.texture2),disposeTexture(instance.uniforms.disp)),instance.scene.traverse(object=>{object.isMesh&&(object.geometry&&object.geometry.dispose(),object.material)&&(Array.isArray(object.material)?object.material.forEach(disposeMaterial):disposeMaterial(object.material))});const gl=instance.renderer.getContext(),ext=gl.getExtension("WEBGL_lose_context");ext&&ext.loseContext(),instance.renderer.dispose(),instance.renderer.domElement&&instance.renderer.domElement.parentNode&&instance.renderer.domElement.parentNode.removeChild(instance.renderer.domElement)}}function disposeMaterial(material){material.map&&material.map.dispose(),material.lightMap&&material.lightMap.dispose(),material.bumpMap&&material.bumpMap.dispose(),material.normalMap&&material.normalMap.dispose(),material.specularMap&&material.specularMap.dispose(),material.envMap&&material.envMap.dispose(),material.dispose()}function disposeTexture(textureUniform){textureUniform&&textureUniform.value&&textureUniform.value.dispose()}function filterImagesAndOverlays(query,maxMatches=1){const queryWords=query.toLowerCase().trim().split(/\s+/),imageContainers=document.querySelectorAll("#gallery-container .image-container"),overlayContainers=document.querySelectorAll("#gallery-container .word-overlay");imageContainers.forEach((container,index)=>{const img=container.querySelector("img"),overlay=overlayContainers[index],metadata=JSON.parse(img.dataset.metadata||"{}"),metadataString=(delete metadata["File Name"],delete metadata.Directory,Object.values(metadata).join(" ").toLowerCase()),words=metadataString.split(" "),promptText=metadata.Prompt||"",promptWords=promptText.toLowerCase().split(" ");let matchingWords=[];if(1===queryWords.length)matchingWords=words.filter(word=>word.toLowerCase().startsWith(queryWords[0]));else for(let i=0;i<words.length;i++)if(words[i].toLowerCase().startsWith(queryWords[0])){let wordGroup=words.slice(i,i+queryWords.length);wordGroup.length===queryWords.length&&wordGroup.every((w,idx)=>w.toLowerCase().startsWith(queryWords[idx]))&&matchingWords.push(wordGroup.join(" "))}if(matchingWords.length>maxMatches&&(shuffleArray(matchingWords),matchingWords=matchingWords.slice(0,maxMatches)),matchingWords=matchingWords.filter((value,index,self)=>self.indexOf(value)===index).sort(),0<matchingWords.length){const displayedWords=[];matchingWords.forEach(matchingWord=>{const isWordInPrompt=promptWords.includes(matchingWord),index=words.findIndex(word=>word===matchingWord),maxDistance=isWordInPrompt?3:0,opacityStep=1/(maxDistance+1),leftWords=[],rightWords=[];for(let i=index-maxDistance;i<=index+maxDistance;i++){let distance=Math.abs(index-i),opacity=1-distance*opacityStep;const wordStyle=`opacity: ${opacity}; color: white;`;if(i<0||i>=words.length){const placeholderWord="   ",placeholder=`<span style='${wordStyle}'>${placeholderWord}</span>`;i<index?leftWords.push(" "+placeholder):i>index&&rightWords.push(placeholder+" ")}else{const actualWord=words[i],wordSpan=`<span style='${wordStyle}'>${actualWord}</span>`;i<index?leftWords.push(" "+wordSpan):i>index&&rightWords.push(wordSpan+" ")}}const leftWidth=leftWords.join("").length,rightWidth=rightWords.join("").length,widthDifference=Math.abs(leftWidth-rightWidth),transparentDots=(leftWidth<rightWidth?leftWords.unshift("&nbsp;".repeat(widthDifference)):rightWidth<leftWidth&&rightWords.push("&nbsp;".repeat(widthDifference)),`<span style='opacity: 0;'>${".".repeat(11)}</span>`),mainWordStyle=(leftWords.unshift(transparentDots),rightWords.push(transparentDots),"opacity: 1; color: white;"),mainWordWithSpaces=` <span style='${mainWordStyle}'>${matchingWord}</span> `,fullLine=[...leftWords,`<span style='${mainWordStyle}'>${mainWordWithSpaces}</span>`,...rightWords].join("");displayedWords.push(fullLine)}),overlay.innerHTML=displayedWords.join("<br>"),container.classList.remove("hidden-image")}else container.classList.add("hidden-image"),overlay.textContent=""})}function shuffleArray(array){for(let i=array.length-1;0<i;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]]}}function showAllImages(){const imageContainers=document.querySelectorAll("#gallery-container .image-container"),overlayContainers=document.querySelectorAll("#gallery-container .word-overlay");imageContainers.forEach((container,index)=>{resetStyles(container),container.classList.remove("hidden-image"),overlayContainers[index].textContent=""})}function resetStyles(container){container.style.transition="",container.style.transform="",container.style.opacity=""}function initializePage(){document.getElementById("search-bar").value="",window.scrollTo(0,0),createBackgroundSurface(),initializeLoadingScreen()}function showSlideshow(){const slideshow=document.getElementById("slideshow");slideshow&&(slideshow.style.display="block")}function toggleSlideshow(){const centeredContainer=document.querySelector(".centered-container");hideButtonOverlay(),"none"!==centeredContainer.style.display&&(centeredContainer.style.opacity="0",centeredContainer.style.transition="opacity 0.3s ease-in-out",setTimeout(()=>{centeredContainer.style.display="none",centeredContainer.style.backgroundColor="rgba(0, 0, 0, 0)",centeredContainer.style.opacity="1",enableScroll(),removeHoverEffect(),disposeLinks()},200))}function hideButtonOverlay(){var buttonOverlay=document.getElementById("button-overlay");buttonOverlay&&(buttonOverlay.style.display="none")}function showNotification(message){let popup=document.getElementById("notification-popup");popup||(popup=document.createElement("div"),popup.id="notification-popup",document.body.appendChild(popup),applyStyles(popup)),popup.textContent=message,popup.style.display="block",popup.style.opacity=1,setTimeout(()=>{popup.style.opacity=0,setTimeout(()=>{popup.style.display="none"},500)},3e3)}function applyStyles(element){element.style.position="fixed",element.style.bottom="20px",element.style.left="50%",element.style.transform="translateX(-50%)",element.style.fontFamily="JetBrainsMono-Bold, sans-serif",element.style.fontSize="16px",element.style.border="2px solid #00ffcc",element.style.borderRadius="20px",element.style.padding="8px 15px",element.style.backgroundColor="black",element.style.color="#00ffcc",element.style.textAlign="center",element.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.6)",element.style.zIndex="10000000000000000000",element.style.opacity="0",element.style.transition="opacity 0.5s ease-in-out",element.style.width="auto",element.style.maxWidth="80%"}function removeButtonOverlay(){var buttonOverlay=document.getElementById("button-overlay");buttonOverlay&&buttonOverlay.parentNode&&buttonOverlay.parentNode.removeChild(buttonOverlay)}function removeHoverEffect(){const wrapper=document.getElementById("hover-effect-wrapper");for(;wrapper.firstChild;)wrapper.removeChild(wrapper.firstChild);hoverEffectInstance=null}function preventDefault(e){e.preventDefault()}function disableScroll(){window.addEventListener("wheel",preventDefault,{passive:!1}),window.addEventListener("touchmove",preventDefault,{passive:!1})}function enableScroll(){window.removeEventListener("wheel",preventDefault),window.removeEventListener("touchmove",preventDefault)}document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",function(event){if(textInfoVisible&&event.target.closest("#text-info2")){const promptElement=document.getElementById("text-prompt2");if(promptElement){const promptText=promptElement.textContent.replace("Prompt:","").trim();promptText&&navigator.clipboard.writeText(promptText).then(()=>{showNotification("Prompt Text copied!")}).catch(err=>{showNotification("Failed to copy prompt text. Please try again.")})}}})}),document.addEventListener("DOMContentLoaded",function(){let clickCount=0,isNotificationVisible=!1;function showNotification2(message,elementId){let popup2=document.getElementById(elementId);popup2||(popup2=document.createElement("div"),popup2.id=elementId,document.body.appendChild(popup2),applyStyles2(popup2)),popup2.textContent=message,popup2.style.display="block",popup2.style.opacity=1,isNotificationVisible=!0,setTimeout(()=>{popup2.style.opacity=0,setTimeout(()=>{popup2.style.display="none",isNotificationVisible=!1,clickCount=0},500)},2500)}function applyStyles2(element){element.style.position="fixed",element.style.bottom="50%",element.style.left="50%",element.style.transform="translateX(-50%) translateY(-50%)",element.style.fontFamily="JetBrainsMono-Bold, sans-serif",element.style.fontSize="16px",element.style.border="2px solid #00ffcc",element.style.borderRadius="20px",element.style.padding="8px 15px",element.style.backgroundColor="rgba(0, 0, 0, 0.7)",element.style.color="#00ffcc",element.style.textAlign="center",element.style.zIndex="1000",element.style.opacity="0",element.style.transition="opacity 0.5s ease-in-out",element.style.width="auto",element.style.maxWidth="80%",element.style.cursor="pointer"}document.body.addEventListener("click",function(event){event.target.closest("#hover-effect-wrapper")?(clickCount++,1===clickCount?globalLinkUrl&&navigator.clipboard.writeText(globalLinkUrl).then(()=>{showNotification2("Sharing Link copied! Click again to open.","notification-popup2")}).catch(err=>{showNotification2("Failed to copy link. Please try again.","notification-popup2")}):2===clickCount&&isNotificationVisible&&globalLinkUrl&&(window.open(globalLinkUrl,"_blank"),clickCount=0)):event.target.closest("#notification-popup2")||(clickCount=0)})}),document.addEventListener("keydown",function(event){"Escape"!==event.key&&"Esc"!==event.key||toggleSlideshow()}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("three"),require("gsap/TweenMax")):"function"==typeof define&&define.amd?define(["three","gsap/TweenMax"],t):e.hoverEffect=t(e.THREE,e.TweenMax)}(this,function(e,t){return t=t&&t.hasOwnProperty("default")?t.default:t,function(n){function i(){for(var e=arguments,t=0;t<arguments.length;t++)if(void 0!==e[t])return e[t]}var x,F,w,L,E,M,P,R,T,U,W,C,D,r=n.parent,o=n.displacementImage,a=n.image1,s=n.image2,f=i(n.imagesRatio,1),d=i(n.intensity1,n.intensity,1),l=i(n.intensity2,n.intensity,1),u=i(n.angle,Math.PI/4),v=i(n.angle1,u),u=i(n.angle2,3*-u),c=i(n.speedIn,n.speed,1.2),p=i(n.speedOut,n.speed,1.2),h=(i(n.hover,!0),i(n.easing,Expo.easeOut)),y=i(n.video,!1);function _(){t.to(C.uniforms.dispFactor,c,{value:1,ease:h,onUpdate:L,onComplete:L})}function z(){t.to(C.uniforms.dispFactor,p,{value:0,ease:h,onUpdate:L,onComplete:L})}r&&a&&s&&o&&(x=new e.Scene,F=new e.OrthographicCamera(r.offsetWidth/-2,r.offsetWidth/2,r.offsetHeight/2,r.offsetHeight/-2,1,1e3),F.position.z=1,w=new e.WebGLRenderer({antialias:!1,alpha:!0}),w.setPixelRatio(2),w.setClearColor(16777215,0),w.setSize(r.offsetWidth,r.offsetHeight),r.appendChild(w.domElement),L=function(){w.render(x,F)},n=new e.TextureLoader,n.crossOrigin="",o=n.load(o,L),o.magFilter=o.minFilter=e.LinearFilter,y?(M=function(){requestAnimationFrame(M),w.render(x,F)},M(),(y=document.createElement("video")).autoplay=!0,y.loop=!0,y.src=a,y.load(),P=document.createElement("video"),P.autoplay=!0,P.loop=!0,P.src=s,P.load(),R=new e.VideoTexture(y),T=new e.VideoTexture(P),R.magFilter=T.magFilter=e.LinearFilter,R.minFilter=T.minFilter=e.LinearFilter,P.addEventListener("loadeddata",function(){P.play(),(T=new e.VideoTexture(P)).magFilter=e.LinearFilter,T.minFilter=e.LinearFilter,C.uniforms.texture2.value=T},!1),y.addEventListener("loadeddata",function(){y.play(),(R=new e.VideoTexture(y)).magFilter=e.LinearFilter,R.minFilter=e.LinearFilter,C.uniforms.texture1.value=R},!1)):(R=n.load(a,L),T=n.load(s,L),R.magFilter=T.magFilter=e.LinearFilter,R.minFilter=T.minFilter=e.LinearFilter),U=f,W=r.offsetHeight/r.offsetWidth<U?(E=1,r.offsetHeight/r.offsetWidth/U):(E=r.offsetWidth/r.offsetHeight*U,1),C=new e.ShaderMaterial({uniforms:{intensity1:{type:"f",value:d},intensity2:{type:"f",value:l},dispFactor:{type:"f",value:0},angle1:{type:"f",value:v},angle2:{type:"f",value:u},texture1:{type:"t",value:R},texture2:{type:"t",value:T},disp:{type:"t",value:o},res:{type:"vec4",value:new e.Vector4(r.offsetWidth,r.offsetHeight,E,W)},dpr:{type:"f",value:window.devicePixelRatio}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"\nvarying vec2 vUv;\n\nuniform float dispFactor;\nuniform float dpr;\nuniform sampler2D disp;\n\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform float angle1;\nuniform float angle2;\nuniform float intensity1;\nuniform float intensity2;\nuniform vec4 res;\nuniform vec2 parent;\n\nmat2 getRotM(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n  return mat2(c, -s, s, c);\n}\n\nvoid main() {\n  vec4 disp = texture2D(disp, vUv);\n  vec2 dispVec = vec2(disp.r, disp.g);\n\n  vec2 uv = 0.5 * gl_FragCoord.xy / (res.xy) ;\n  vec2 myUV = (uv - vec2(0.5))*res.zw + vec2(0.5);\n\n\n  vec2 distortedPosition1 = myUV + getRotM(angle1) * dispVec * intensity1 * dispFactor;\n  vec2 distortedPosition2 = myUV + getRotM(angle2) * dispVec * intensity2 * (1.0 - dispFactor);\n  vec4 _texture1 = texture2D(texture1, distortedPosition1);\n  vec4 _texture2 = texture2D(texture2, distortedPosition2);\n  gl_FragColor = mix(_texture1, _texture2, dispFactor);\n}\n",transparent:!0,opacity:1}),a=new e.PlaneBufferGeometry(r.offsetWidth,r.offsetHeight,1),D=new e.Mesh(a,C),x.add(D),window.addEventListener("resize",function(t){W=r.offsetHeight/r.offsetWidth<U?(E=1,r.offsetHeight/r.offsetWidth/U):(E=r.offsetWidth/r.offsetHeight*U,1),D.material.uniforms.res.value=new e.Vector4(r.offsetWidth,r.offsetHeight,E,W),w.setSize(r.offsetWidth,r.offsetHeight),L()}),this.next=_,this.previous=z)}});